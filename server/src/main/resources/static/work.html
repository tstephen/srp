<!doctype html>
<html lang='en-GB'>
<head>
  <meta http-equiv="x-ua-compatible" content="IE=Edge"/> 
  <!-- as the **very** first line just after head-->  
  <meta charset='utf-8'>
  <title>Work Management</title>
  <link href="/webjars/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
  <link href="/webjars/bootstrap/3.3.5/css/bootstrap-theme.min.css" rel="stylesheet">
  <link href="2.0.0/css/omny-1.0.0.css" rel="stylesheet">
  <link href="/2.0.0/css/srp.css" rel="stylesheet">
</head>
<body>
  <div class="clearfix" id="messages"></div>
  <div class="container" id="container"></div>
  <script id='template' type='text/ractive'>
    {{>profileArea}}
    {{>titleArea}}
  
    {{>workListSect}}
    {{>workCurrentSect}}
  
    {{>sidebar { active: 'work.html' }}}
  </script>

  <script id="enumTemplate" type="text/html">
    <label class="col-md-offset-3">{{name}}</label>
    <select id="{{..id}}" {{..writeable==false ? 'readonly disabled' : ''}} onblur="ractive.get('current').processVariables[this.id]=this.value" value="{{..value}}">
      <option></option>  
    </select>
  </script>
  <script id="jsonTemplate" type="text/html">
    <fieldset><legend class="col-md-12">{{name}}</legend>
      <div class="clearfix"></div>
      <ul class="form edit-form">
        {{# keys}}
          <li class="col-md-12">
            <label class="col-md-3">{{formatLabel(.)}}</label>
            <input class="form-control col-md-9" id="cur{{.}}" readonly value="{{obj[.]}}">
          </li>
        {{/}}
      </ul>
    </fieldset>
  </script>
  <script id="linkTemplate" type="text/html">
    <!-- TODO need to get this from tenant config -->
    <a class="col-md-offset-3" href="{{value}}" target="_newtab">{{name == undefined ? id : name}}</a>
  </script>
  <script id="defaultTemplate" type="text/html">
    <label class="col-md-3">{{name}}</label>
    <input class="form-control" id="{{..id}}" {{..writeable==false ? 'readonly disabled' : ''}} onblur="ractive.get('current').processVariables[this.id]=this.value" value="{{..value}}">
  </script>

  <script src="/webjars/jquery/1.11.1/jquery.min.js"></script>
  <script src="/webjars/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="/webjars/bootstrap-datepicker/1.4.0/js/bootstrap-datepicker.min.js"></script>
  <script src="/webjars/Bootstrap-3-Typeahead/3.1.1/bootstrap3-typeahead.js"></script>
  <script src="/webjars/ractive/0.7.3/ractive.min.js"></script>

  <script src="js/autoNumeric.js"></script>
  <script src="js/md5.min.js"></script>
  <script src="js/activity-1.0.0.js"></script>
  <script src="js/string-functions-0.1.0.js"></script>
  <script src="js/login-1.0.0.js"></script>
  <script src="js/workmgmt-1.0.0.js"></script>
  <script src="js/omny-1.0.0.js"></script>
  <script src="js/embed.js"></script>
  <script>
    $(document).ready(function() {
      // are we running in sub-context?
      if (document.location.href.indexOf('https://trakeo.com/srp')!=-1) {
        ractive.set('server','https://trakeo.com/srp');
        ractive.set('context','/srp');
      }
    });
  </script>
</body>
</html>
