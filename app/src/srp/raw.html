<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta charset="utf-8">
  <title>Sustainable Resource Planning</title>
  <!--link href="/webjars/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"-->
  <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
  <link rel="stylesheet" type="text/css" href="//localhost:8083/workmgmt/3.0.0/css/base.css"/>

  <link href="./vsn/css/srp.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/srp/images/icon/srp-icon-32x32.png" />
<head>
<body>
  <div class="clearfix" id="messages"></div>
  <section id="container" class="container"></section>

  <script id='template' type='text/ractive'>
    {{>loginSect}}

    <section id="currentSect">
      <h2>
        <div class="col-sm-6 col-xs-12">
          <a id="answersTableToggle" class="clickable glyphicon icon-btn kp-icon-caret-down" aria-hidden="true" on-click="toggleResults()" title="Collapse or expand the answer table"></a>
          <span>{{surveyReturn.name}}</span>
          <a class="clickable glyphicon icon-btn kp-icon-refresh" aria-hidden="true" on-click="fetch()" title="Refresh the list"></a>
        </div>
        <div class="col-sm-6 col-xs-12">
          <input type="search" class="form-control search" accesskey="k" placeholder="Search" value="{{searchTerm}}">
          <a class="glyphicon icon-btn kp-icon-search" aria-hidden="true" title="Search for matching answers"></a>
        </div>
      </h2>

      <section>
        {{#if surveyReturn}}
          <table class="table table-striped">
            <thead>
              <tr>
                <th class="col-sm-1" on-click="sort:id"><span class="sortable {{ sorted('id') }} glyphicon icon-btn "></th>
                <th class="col-sm-3" on-click="sort:question.name">Question<span class="sortable {{ sorted('question.name') }} glyphicon icon-btn "></th>
                <th class="col-sm-2" on-click="sort:applicablePeriod">Period<span class="sortable {{ sorted('applicablePeriod') }} glyphicon icon-btn "></th>
                <th class="col-sm-1" on-click="sort:status">Status<span class="sortable {{ sorted('status') }} glyphicon icon-btn "></th>
                <th class="col-sm-1" on-click="sort:revision">Revision<span class="sortable {{ sorted('revision') }} glyphicon icon-btn "></th>
                <th class="col-sm-4" on-click="sort:response">Response<span class="sortable {{ sorted('response') }} glyphicon icon-btn "></th>
              </tr>
            </thead>
            <tbody>
              {{# surveyReturn.answers}}
                {{# matchSearch(this) }}
                <tr>
                  <td>{{id}}</td>
                  <td>{{question.name}}</td>
                  <td>{{applicablePeriod}}</td>
                  <td>{{status}}</td>
                  <td>{{revision}}</td>
                  <td>{{response}}</td>
                </tr>
                {{/}}
              {{/}}
            </tbody>
          </table>
        {{else}}
          <section class="loading" id="loadingSect">
            <span class="loading">Your report should load automatically in the next few moments.</span>
            <button on-click="fetch()">Load it now</button>
          </section>
        {{/if}}
      </section>
    </section>
  </script>

  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/ractive/0.7.3/ractive.min.js'></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>

  <script src="http://localhost:8083/js/md5.min.js"></script>
  <script src="./vsn/js/string-functions-0.1.0.js"></script>
  <script src="http://localhost:8083/workmgmt/3.0.0/js/i18n.js"></script>

  <script src="http://localhost:8083/js/env.js"></script>
  <script src="./vsn/js/base.js"></script>
  <script src="./vsn/js/report.js"></script>
  <script src="http://localhost:8083/webjars/auth/2.0.0/js/auth.js"></script>
</body>
</html>
